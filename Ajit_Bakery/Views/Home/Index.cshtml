@{
    ViewData["Title"] = "Home Page";
}
<style>


</style>
<!-- [ Main Content ] start -->
<div class="row">
    @* <div class="col-md-3 col-xl-3">
        <div class="card bg-grd-primary order-card">
            <div class="card-body">
                <h6 class="text-white">Orders Received</h6>
                <h2 class="text-end text-white">
                    <i class="feather icon-shopping-cart float-start"></i><span>@ViewBag.TotalOrders</span>
                </h2>
                <span class="badge blink-badge">@ViewBag.productionListgetBadge</span>
            </div>
        </div>
    </div> *@
        <div class="col-md-3 col-xl-3">
        <div class="card bg-grd-primary order-card position-relative" onclick="callAction()">
                <div class="card-body">
                    <!-- Blinking Badge at the Left Corner -->
                @* <span class="badge bg-success text-white fs-5 spinner-grow spinner-grow"> @ViewBag.productionListgetBadge</span> *@
               @*  <div class="position-relative d-inline-block">
                    <div class="spinner-grow text-success" style="width: 3rem; height: 3rem;" role="status"></div>
                    <span class="position-absolute top-50 start-50 translate-middle text-white fw-bold">
                        @ViewBag.productionListgetBadge
                    </span>
                </div> *@
                @if (ViewBag.productionListgetBadge != null && ViewBag.productionListgetBadge.ToString() != "0")
                {
                    <div class="position-relative d-inline-block">
                        <div class="spinner-grow text-success" style="width: 3rem; height: 3rem;" role="status"></div>
                        <span class="position-absolute top-50 start-50 translate-middle text-white fw-bold">
                            @ViewBag.productionListgetBadge
                        </span>
                    </div>
                }

                    <h6 class="text-white">Orders Received</h6>
                    <h2 class="text-end text-white">
                        <i class="feather icon-shopping-cart float-start"></i>
                        <span>@ViewBag.TotalOrders</span>
                    </h2>
                </div>
            </div>
        </div>

    <div class="col-md-3 col-xl-3">
        <a href="@Url.Action("StatusFound", "Home")" style="text-decoration: none;">
            <div class="card bg-grd-success order-card ">
                <div class="card-body">
                    <h6 class="text-white">Pending Orders</h6>
                    <h2 class="text-end text-white">
                        <i class="feather icon-tag float-start"></i>
                        <span>@ViewBag.PendingOrders</span>
                    </h2>
                </div>
            </div>
        </a>
    </div>

    <div class="col-md-3 col-xl-3">
        <div class="card bg-grd-warning order-card">
            <div class="card-body">
                <h6 class="text-white">Total Production</h6>
                <h2 class="text-end text-white"><i class="feather icon-award float-start"></i><span>@ViewBag.CompletedProductions</span></h2>
                @* <p class="m-b-0">This Month<span class="float-end">$542</span></p> *@
            </div>
        </div>
    </div>

    <div class="col-md-3 col-xl-3">
        <div class="card bg-grd-danger order-card ">
            <div class="card-body">
                <h6 class="text-white">Total Dispatches</h6>
                <h2 class="text-end text-white"><i class="feather icon-repeat float-start"></i><span>@ViewBag.CompletedDispatches</span></h2>
                @* <p class="m-b-0">This Month<span class="float-end">$5,032</span></p> *@
            </div>
        </div>
    </div>

   

    @* Second Row *@
    <!-- <div class="col-md-4 col-sm-6">
         <div class="card statistics-card-1">
             <div class="card-body">
                 <img src="~/assets/images/widget/img-status-4.svg" alt="img" class="img-fluid img-bg" />
                 <div class="d-flex align-items-center justify-content-between mb-3 drp-div">
                     <h6 class="mb-0">Pending Orders</h6>
                 </div>
                 <div class="d-flex align-items-center mt-3">
                     <h3 class="f-w-300 d-flex align-items-center m-b-0">20</h3>
    @* <span class="badge bg-light-success ms-2">36%</span> *@
                 </div>
    @* <p class="text-muted mb-2 text-sm mt-3">You made an extra 35,000 this daily</p> *@
                 <div class="progress" style="height: 7px">
                     <div class="progress-bar bg-brand-color-1" role="progressbar" style="width: 75%" aria-valuenow="75"
                          aria-valuemin="0" aria-valuemax="100"></div>
                 </div>
             </div>
         </div>
     </div>
     <div class="col-md-4 col-sm-6">
         <div class="card statistics-card-1">
             <div class="card-body">
                 <img src="~/assets/images/widget/img-status-5.svg" alt="img" class="img-fluid img-bg" />
                 <div class="d-flex align-items-center justify-content-between mb-3 drp-div">
                     <h6 class="mb-0">Total Dispatches</h6>
                 </div>
                 <div class="d-flex align-items-center mt-3">
                     <h3 class="f-w-300 d-flex align-items-center m-b-0">100</h3>
    @* <span class="badge bg-light-primary ms-2">20%</span> *@
                 </div>
    @* <p class="text-muted mb-2 text-sm mt-3">You made an extra 35,000 this Monthly</p> *@
                 <div class="progress" style="height: 7px">
                     <div class="progress-bar bg-brand-color-3" role="progressbar" style="width: 75%" aria-valuenow="75"
                          aria-valuemin="0" aria-valuemax="100"></div>
                 </div>
             </div>
         </div>
     </div>
     <div class="col-md-4 col-sm-12">
         <div class="card statistics-card-1 bg-brand-color-1">
             <div class="card-body">
                 <img src="~/assets/images/widget/img-status-6.svg" alt="img" class="img-fluid img-bg" />
                 <div class="d-flex align-items-center justify-content-between mb-3 drp-div">
                     <h6 class="mb-0 text-white">Total Production Orders</h6>
                 </div>
                 <div class="d-flex align-items-center mt-3">
                     <h3 class="text-white f-w-300 d-flex align-items-center m-b-0">100</h3>
                 </div>
    @* <p class="text-white text-opacity-75 mb-2 text-sm mt-3">You made an extra 35,000 this Daily</p> *@
                 <div class="progress" style="height: 7px">
                     <div class="progress-bar bg-brand-color-3" role="progressbar" style="width: 75%" aria-valuenow="75"
                          aria-valuemin="0" aria-valuemax="100"></div>
                 </div>
             </div>
         </div>
      </div> -->

    @* Chart *@
    <div class="col-md-12 col-xl-7">
        <div class="card">
            <div class="card-header">
                <h6><b>Production Report</b></h6>
            </div>
            <div class="card-body">
                <div id="chart" style="height: 365px;"></div>
            </div>
        </div>
    </div>


    <!--  <div class="col-md-4 col-xl-5">
          <div class="card">
              <div class="card-header d-flex align-items-center justify-content-between py-3">
                  <h5>New Order </h5>
                  <div class="dropdown">
                      <a class="avtar avtar-xs btn-link-secondary dropdown-toggle arrow-none" href="#"
                         data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <i class="material-icons-two-tone f-18">more_vert</i>
                      </a>
                      <div class="dropdown-menu dropdown-menu-end">
                          <a class="dropdown-item" href="#">View</a>
                          <a class="dropdown-item" href="#">Edit</a>
                      </div>
                  </div>
              </div>
              <div class="card-body">
                  <div class="media align-items-center">
                      <div class="avtar avtar-s bg-light-primary flex-shrink-0">
                          <i class="ph ph-money f-20"></i>
                      </div>
                      <div class="media-body ms-3">
                          <p class="mb-0 text-muted">Total Dispatches</p>
                          <h5 class="mb-0">100</h5>
                      </div>
                  </div>
                  <div id="earnings-users-chart"></div>
              </div>
          </div>
          <div class="card">
              <div class="card-body">
                  <div class="row">
                      <div class="col-6">
                          <div class="media align-items-center">
                              <div class="avtar avtar-s bg-grd-primary flex-shrink-0">
                                  <i class="ph ph-money f-20 text-white"></i>
                              </div>
                              <div class="media-body ms-2">
                                  <p class="mb-0 text-muted">Total Production</p>
                                  <h6 class="mb-0">100</h6>
                              </div>
                          </div>
                      </div>

                  </div>
              </div>
          </div>
        </div> -->
    <!-- Recent Orders start -->
    <div class="col-sm-12" style="display:none">
        <div class="card table-card">
            <div class="card-header">
                <h5>Recent Orders</h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table">
                        <tr>
                            <th>Image</th>
                            <th>Product Code</th>
                            <th>Customer</th>
                            <th>Purchased On</th>
                            <th>Status</th>
                            <th>Transaction ID</th>
                        </tr>
                        <tr>
                            <td><img src="~/assets/images/widget/p1.jpg" alt="prod img" class="img-fluid" /></td>
                            <td>PNG002413</td>
                            <td>Jane Elliott</td>
                            <td>06-01-2017</td>
                            <td><span class="badge bg-primary">Shipping</span></td>
                            <td>#7234421</td>
                        </tr>
                        <tr>
                            <td><img src="~/assets/images/widget/p2.jpg" alt="prod img" class="img-fluid" /></td>
                            <td>PNG002344</td>
                            <td>John Deo</td>
                            <td>05-01-2017</td>
                            <td><span class="badge bg-danger">Failed</span></td>
                            <td>#7234486</td>
                        </tr>
                        <tr>
                            <td><img src="~/assets/images/widget/p3.jpg" alt="prod img" class="img-fluid" /></td>
                            <td>PNG002653</td>
                            <td>Eugine Turner</td>
                            <td>04-01-2017</td>
                            <td><span class="badge bg-success">Delivered</span></td>
                            <td>#7234417</td>
                        </tr>
                        <tr>
                            <td><img src="~/assets/images/widget/p4.jpg" alt="prod img" class="img-fluid" /></td>
                            <td>PNG002156</td>
                            <td>Jacqueline Howell</td>
                            <td>03-01-2017</td>
                            <td><span class="badge bg-warning">Pending</span></td>
                            <td>#7234454</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- Recent Orders end -->
</div>

<link href="~/css/site.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<!-- [ Main Content ] end -->
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        var options = {
            series: [{
                name: 'Sales',
                data: [44, 55, 41, 67, 22, 43]
            }],
            chart: {
                type: 'bar',
                height: 350
            },
            plotOptions: {
                bar: {
                    horizontal: false,
                    columnWidth: '50%',
                    borderRadius: 5
                }
            },
            colors: ['#1E3C72'], // Primary blue color
            fill: {
                type: 'gradient',
                gradient: {
                    shade: 'dark',
                    type: 'vertical',
                    shadeIntensity: 0.5,
                    gradientToColors: ['#2A5298'], // Lighter blue at the bottom
                    inverseColors: false,
                    opacityFrom: 1,
                    opacityTo: 1,
                    stops: [0, 100]
                }
            },
            dataLabels: {
                enabled: false
            },
            xaxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            }
        };

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();
    </script>

}


<script>
    function callAction() {
        $.ajax({
            url: '@Url.Action("clearSession", "Home")', // Fixed the incorrect parameter order
            type: 'GET',
            success: function (response) {
                // alert("Session cleared! Redirecting...");
                window.location.href = '@Url.Action("Index", "ProductionCaptures")'; // Manually redirect after AJAX success
            },
            error: function () {
                alert("Something went wrong!");
            }
        });
    }

</script>